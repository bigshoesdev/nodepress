<%- include ./partials/header %>
<style>
   .category-check {
      color: white;
      position: absolute;
      top: 15px;
      right: 15px;
      font-size: 25px;
   }

   .next-btn button {
      width: 20%;
      padding: 10px;
      background: #3452ff;
      border: none;
      border-radius: 4px;
      font-weight: 600;
      color: white;
      transition: 0.5s;
   }

   .next-btn {
      text-align: right;
      margin: 10px;
      margin-bottom: 100px;
   }
   .show-more{
      display: none;
   }
   .show-more-text{
      text-align: right;
      margin: 50px;
      font-size: 25px;
   }
   .save-button{
      display: none;
   }
</style>
<div class="onboarding-banner">
   <div class="container">
      <div class="inner-onboarding">
         <div class="onboarding-banner-heading">
            <h1>Willkommen bei Dype. Artikel, die Leser begeistern. FÃ¼r welche Kategorien begeisterst du dich ?</h1>
         </div>
         <div class="onboarding-banner-get-touch">
            <h3>Wanna get in touch? Let's talk <span><i class="fa fa-arrow-circle-o-right"
                     aria-hidden="true"></i></span></h3>
         </div>
      </div>
   </div>
</div>

<div class="onboarding-content">
   <div class="container-fluid">
      <div class="inner-onboarding-content">
         <div class="row">
            <% for(var i = 0; i < 20; i ++){%>
            <div class="col-md-3 col-lg-3 col-sm-3">
               <div class="over-hideen">
                  <div class="onboarding-content-bgimg11" categorySelected="false"
                     categorySlug="<%= categories[i].slug%>" categoryId="<%= categories[i]._id%>"
                     style="background-image:linear-gradient(#0000003d, #00000040),url('<%= categories[i].background%>');">
                     <div class="onboarding-content-text">
                        <h4 style="color: #fff;"><%= categories[i].name %></h4>
                        <p style=" color: #fff;"><%= categories[i].description %></p>
                     </div>
                     <i class="fa fa-check-circle category-check category-check<%= categories[i]._id%>"></i>
                  </div>
               </div>
            </div>
            <%}%>
         </div>
         <div class="row">
            <div class="col-12">
               <div class="show-more-text">..und viele weitere Kategorien</div>
            </div>
         </div>
         <div class="row show-more">
            <% for(var i = 20; i < categories.length; i ++){%>
            <div class="col-md-3 col-lg-3 col-sm-3">
               <div class="over-hideen">
                  <div class="onboarding-content-bgimg11" categorySelected="false"
                     categorySlug="<%= categories[i].slug%>" categoryId="<%= categories[i]._id%>"
                     style="background-image:linear-gradient(#0000003d, #00000040),url('<%= categories[i].background%>');">
                     <div class="onboarding-content-text">
                        <h4 style="color: #fff;"><%= categories[i].name %></h4>
                        <p style=" color: #fff;"><%= categories[i].description %></p>
                     </div>
                     <i class="fa fa-check-circle category-check category-check<%= categories[i]._id%>"></i>
                  </div>
               </div>
            </div>
            <%}%>
         </div>
         <div class="row save-button">
            <form action="/choose-category" method="POST">
            <div class="next-btn">
               <input type="hidden" name="categoryCount" id="categoryCount" value="<%= categoryCount%>" />
            <input type="hidden" name="categoryList" id="categoryList" />
            <button type="submit">Save and Continue</button>
         </div>
         </form>
      </div>
   </div>
</div>
</div>
<script src="/js/jquery-2.1.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
   $(function () {
      $('.show-more-text').click(function(){
         $('.show-more').css('display', 'block');
         $('show-more-text').css('display', 'none');
         $('save-button').css('display', 'block');
      });
      var categoryCountLimit = $('#categoryCount').val();
      var selectCount = 0;
      var selectCategory = [];
      $('.fa-check-circle').hide()
      $('.onboarding-content-bgimg11').click(function (event) {
         var categoryId = $(this).attr('categoryId');
         var categorySlug = $(this).attr('categorySlug');
         var selected = $(this).attr('categorySelected');
         var categoryck = ".category-check" + categoryId;
         if (selected == 'false') {
            if (selectCount < categoryCountLimit) {
               selectCount++;
               selectCategory.push(categorySlug);
               $(this).attr('categorySelected', 'true');
               $(this).css('box-shadow', 'inset 0 0 0 2000px #3452ffb3');
               $(categoryck).show();
            } else {
               $(this).css('box-shadow', '');
               $(categoryck).hide();
            }
         } else if (selected == 'true') {
            if (selectCount <= categoryCountLimit) {
               selectCount--;
               var result = selectCategory.filter(function (elem) {
                  return elem != categorySlug;
               });
               selectCategory = result;
               $(this).attr('categorySelected', 'false');
               $(this).css('box-shadow', '');
               $(categoryck).hide();
            } else {
               $(this).css('box-shadow', '');
               $(categoryck).hide();
            }
         }
      })
   });
</script>
<%- include ./partials/footer %>